<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ahmed & Doaa Engagement</title>

<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Georgia&display=swap" rel="stylesheet">

<style>
body {
  margin: 0;
  font-family: Georgia, serif;
  background: #fdf8f2;
  color: #4a3b2f;
  text-align: center;
  overflow-x: hidden;
}

/* PETALS */
.petal {
  position: fixed;
  top: -10%;
  pointer-events: none;
  animation: fall linear infinite;
  opacity: 0.7;
  z-index: 1;
}
@keyframes fall {
  to { transform: translateY(120vh) rotate(360deg); }
}

/* POSTER */
.poster-page {
  position: fixed;
  inset: 0;
  background: #f4e8d6;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 20;
  cursor: pointer;
  transition: opacity .8s;
}
.poster-page.hide { opacity: 0; pointer-events: none; }
.poster-page img {
  width: 80%;
  max-width: 500px;
  border-radius: 20px;
}
.poster-page .overlay {
  margin-top: 20px;
  font-family: 'Great Vibes', cursive;
  font-size: 2.5em;
}

/* ENVELOPE */
.envelope {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 80%;
  max-width: 400px;
  z-index: 15;
  perspective: 1000px;
}
.envelope .flap {
  height: 100px;
  background: linear-gradient(#fefaf3,#f0e3d2);
  border: 2px solid #d6c6b8;
  border-bottom: none;
  border-radius: 10px 10px 0 0;
  font-family: 'Great Vibes', cursive;
  font-size: 2em;
  display: flex;
  justify-content: center;
  align-items: center;
  transform-origin: bottom;
  transition: transform 1s;
}
.envelope.open .flap { transform: rotateX(-180deg); }
.envelope .body {
  height: 100px;
  background: #fffdf5;
  border: 2px solid #d6c6b8;
  border-radius: 0 0 10px 10px;
  display: flex;
  justify-content: center;
  align-items: center;
  font-style: italic;
}

/* INVITE */
.invite {
  max-width: 800px;
  margin: 80px auto;
  padding: 50px 30px;
  background: #fffdf5;
  border-radius: 25px;
  border: 2px solid #e0d8c0;
  box-shadow: 0 25px 50px rgba(0,0,0,.15);
  opacity: 0;
  transition: opacity 1s;
}
.invite.show { opacity: 1; }

.invite-title {
  font-family: 'Great Vibes', cursive;
  font-size: 3.5em;
}
.subtitle { font-style: italic; margin-bottom: 40px; }

/* MENU */
.menu {
  display: flex;
  gap: 15px;
  flex-wrap: wrap;
  justify-content: space-around;
}
.menu button {
  flex: 1;
  min-width: 120px;
  padding: 18px;
  border-radius: 20px;
  background: #f5ede4;
  border: 1px solid #d6c6b8;
  cursor: pointer;
}

/* SECTIONS */
.section {
  display: none;
  background: #f9f5ee;
  padding: 20px;
  border-radius: 15px;
  margin-top: 20px;
}
.section.active { display: block; }

/* FORMS */
input, textarea {
  width: 100%;
  padding: 12px;
  margin: 10px 0;
  border-radius: 10px;
  border: 1px solid #d6c6b8;
}
form button {
  background: #8d6e63;
  color: white;
  padding: 12px 30px;
  border-radius: 20px;
  border: none;
}

/* MESSAGE */
.message {
  background: #f3ebe2;
  padding: 14px;
  border-radius: 14px;
  margin-top: 10px;
  border-left: 4px solid #d6c6b8;
}

/* WHATSAPP */
.whatsapp {
  background: #25D366;
  color: white;
  padding: 14px 25px;
  border-radius: 20px;
  border: none;
  margin-top: 20px;
}
</style>
</head>

<body>

<!-- MUSIC -->
<audio id="bgMusic" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<!-- PETALS -->
<script>
for(let i=0;i<25;i++){
  const p=document.createElement('div');
  p.className='petal';
  p.textContent='üå∏';
  p.style.left=Math.random()*100+'vw';
  p.style.fontSize=14+Math.random()*10+'px';
  p.style.animationDuration=8+Math.random()*10+'s';
  document.body.appendChild(p);
}
</script>

<!-- POSTER -->
<div class="poster-page" id="posterPage">
  <img src="poster.jpg">
  <div class="overlay">Tap to Open Envelope</div>
</div>

<!-- ENVELOPE -->
<div class="envelope" id="envelope">
  <div class="flap">Ahmed & Doaa</div>
  <div class="body">Tap to open your invitation</div>
</div>

<!-- INVITE -->
<div class="invite" id="invite">
  <h1 class="invite-title">Ahmed & Doaa</h1>
  <p class="subtitle">üìÖ 2 / 2 / 2026 ‚Äî ‚è∞ 7:00 PM</p>

  <div class="menu">
    <button onclick="openSection('location')">üìç Location</button>
    <button onclick="openSection('party')">üéâ Party</button>
    <button onclick="openSection('message')">üíå Messages</button>
  </div>

  <div id="location" class="section">
    <p><strong>El-baron hall - October panorama club - salah salem street</strong></p>
    <iframe src="https://www.google.com/maps/embed?pb=!1m18!..." width="100%" height="300"></iframe>
    <p><a href="https://maps.app.goo.gl/noabXgBs4jchyzeTA" target="_blank">Open in Google Maps</a></p>
  </div>

  <div id="party" class="section">
    <p>An intimate evening filled with love ü§ç</p>
  </div>

  <!-- MESSAGE SECTION -->
  <div id="message" class="section">

    <!-- SEND MESSAGE (ALWAYS VISIBLE) -->
    <form id="msgForm">
      <input required placeholder="Your name">
      <textarea required placeholder="Your message"></textarea>
      <button type="submit">Send Message</button>
    </form>

    <hr style="margin:30px 0">

    <!-- VIEW MESSAGES (PASSWORD) -->
    <div id="viewGate">
      <p><strong>Enter password to view messages</strong></p>
      <input type="password" id="viewPass">
      <button onclick="unlockMessages()">View Messages</button>
      <p id="passError" style="color:red; display:none;">Wrong password</p>
    </div>

    <div id="messagesBox" style="display:none;"></div>

  </div>

  <button class="whatsapp" onclick="shareWhatsApp()">Share via WhatsApp</button>
</div>

<script>
/* MUSIC ON FIRST CLICK */
document.addEventListener('click',()=>{
  const m=document.getElementById('bgMusic');
  if(m.paused) m.play().catch(()=>{});
},{once:true});

/* FLOW */
posterPage.onclick=()=>posterPage.classList.add('hide');
envelope.onclick=()=>{
  envelope.classList.add('open');
  setTimeout(()=>{
    envelope.style.display='none';
    invite.classList.add('show');
  },1000);
};

/* SECTIONS */
function openSection(id){
  document.querySelectorAll('.section').forEach(s=>{
    s.classList.toggle('active',s.id===id);
  });
}

/* FIREBASE */
const DB_URL="https://ahmeddoaaengagement-default-rtdb.firebaseio.com/messages.json";

/* SEND MESSAGE */
msgForm.onsubmit=e=>{
  e.preventDefault();
  fetch(DB_URL,{
    method:'POST',
    body:JSON.stringify({
      name:msgForm[0].value,
      text:msgForm[1].value
    })
  }).then(()=>{
    msgForm.reset();
    alert("Message sent ‚ù§Ô∏è");
  });
};

/* VIEW MESSAGES */
const VIEW_PASSWORD="doaa&ahmed";
function unlockMessages(){
  if(viewPass.value!==VIEW_PASSWORD){
    passError.style.display="block";
    return;
  }
  viewGate.style.display="none";
  messagesBox.style.display="block";
  fetch(DB_URL).then(r=>r.json()).then(d=>{
    messagesBox.innerHTML='';
    if(d) Object.values(d).reverse().forEach(m=>{
      messagesBox.innerHTML+=`<div class="message"><strong>${m.name}</strong>${m.text}</div>`;
    });
  });
}

/* WHATSAPP */
function shareWhatsApp(){
  window.open(`https://wa.me/?text=${encodeURIComponent("You're invited üíç "+location.href)}`);
}
</script>

</body>
</html>
